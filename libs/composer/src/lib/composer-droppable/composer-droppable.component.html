<div
  class="rendered-item"
  *ngIf="fullConfig?.item?.component; else dropTpl"
  nz-popover
  [nzPopoverContent]="controlsTpl"
  [(nzPopoverVisible)]="controlsVisible"
  (mouseover)="hover(true)"
  (mouseout)="hover(false)"
>
  <orc-render-item [item]="fullConfig.item"></orc-render-item>
  <nz-card
    class="config"
    *ngIf="showConfig"
    [nzTitle]="componentName + ' config'"
    [nzExtra]="closeConfigTpl"
    [nzActions]="[actionClearItems, actionSave]"
  >
    <orc-composer-configurator
      [component]="fullConfig.item.component"
      [config]="fullConfig.item.config"
      (configUpdate)="configUpdated($event)"
    ></orc-composer-configurator>
    <ng-template #closeConfigTpl>
      <button class="close-config-btn" nz-button (click)="showConfig = false">
        <i nz-icon nzType="close"></i>
      </button>
    </ng-template>
  </nz-card>
  <ng-template #actionSave>
    <i
      nz-icon
      type="check"
      nz-tooltip
      nzTitle="Close configuration"
      (click)="showConfig = false"
    ></i>
  </ng-template>
  <ng-template #actionClearItems>
    <i
      nz-icon
      type="switcher"
      nz-tooltip
      nzTitle="Clear children"
      (click)="clearItems()"
    ></i>
  </ng-template>
</div>
<ng-template #dropTpl>
  <div class="drop-list" cdkDropList (cdkDropListDropped)="drop($event)">
    <span class="drop-list-hint">Drop component here!</span>
  </div>
</ng-template>
<ng-template #controlsTpl>
  <nz-button-group>
    <button
      nz-button
      nzSize="small"
      nz-tooltip
      nzTitle="Clear children"
      (click)="clearItems()"
    >
      <i nz-icon type="switcher"></i>
    </button>
    <button
      nz-button
      [nzType]="showConfig ? 'primary' : null"
      nzSize="small"
      nz-tooltip
      nzTitle="Edit configuration"
      (click)="showConfig = !showConfig"
    >
      <i nz-icon nzType="edit"></i>
    </button>
    <button
      nz-button
      nzDanger
      nzSize="small"
      nz-tooltip
      nzTitle="Remove item"
      (click)="removeItem()"
    >
      <i nz-icon nzType="delete"></i>
    </button>
  </nz-button-group>
</ng-template>
